{"ast":null,"code":"import _classCallCheck from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/maksimzajcev/Desktop/Work/src/components/React.month.js\";\nimport React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport moment from 'moment';\nimport MonthWorkspace from './React.month.workspace';\nimport '../css/main.css';\nvar urlLogs = 'http://localhost:3000/logs';\n\nvar Month =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Month, _React$Component);\n\n  function Month(props) {\n    var _this;\n\n    _classCallCheck(this, Month);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Month).call(this, props));\n    _this.state = {\n      charts: {},\n      defaultChart: [],\n      strainData: [],\n      settingPeriod: moment(new Date()).format('MM.YYYY'),\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(Month, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadData(this.state.settingPeriod);\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData(period) {\n      var _this2 = this;\n\n      console.log(\"Загружаемый период:\");\n      console.log(period);\n      fetch(urlLogs + '?period=' + period).then(function (response) {\n        console.log(response);\n        return response.json();\n      }).then(function (result) {\n        return _this2.parseData(result, period);\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"parseData\",\n    value: function parseData(usersLogs, period) {\n      console.log('Результат загрузки:');\n      console.log(usersLogs);\n      var startDate = moment('01.' + period, 'DD.MM.YYYY');\n      console.log('Начальная дата:');\n      console.log(startDate);\n      var usersChart = this.sortUsersChart(usersLogs, period);\n      var visitsChart = this.sortVisitsChart(usersLogs, period);\n      var viewsChart = this.sortViewsChart(usersLogs, period);\n      var defaultChart = this.getDefaultChart(period);\n      var charts = {\n        users: {\n          chartId: 4501,\n          data: usersChart,\n          display: true,\n          color: '#84c9f6'\n        },\n        visits: {\n          chartId: 4502,\n          data: visitsChart,\n          display: true,\n          color: '#3fa6e9'\n        },\n        views: {\n          chartId: 4503,\n          data: viewsChart,\n          display: true,\n          color: '#127bbf'\n        }\n      };\n      var strainData = [];\n\n      for (var i = 0; i < 30; i++) {\n        var dayData = {\n          date: charts.users.data[i].x,\n          users: charts.users.data[i].y,\n          visits: charts.visits.data[i].y,\n          views: charts.views.data[i].y\n        };\n        strainData.push(dayData);\n      }\n\n      this.setState({\n        charts: charts,\n        defaultChart: defaultChart,\n        strainData: strainData,\n        loading: true\n      });\n    }\n  }, {\n    key: \"sortVisitsChart\",\n    value: function sortVisitsChart(userLogs, startDate) {\n      var currentlyDate = startDate;\n      var start = currentlyDate.subtract(30, \"days\");\n      var sortVisits = [];\n\n      for (var i = 30; i > 0; i--) {\n        var visitsOnDay = 0;\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === start.format('DD.MM')) {\n            visitsOnDay++;\n          }\n        }\n\n        var oneDayValue = {\n          x: start.format('DD.MM'),\n          y: visitsOnDay\n        };\n        start = start.add(1, \"days\");\n        sortVisits.push(oneDayValue);\n      }\n\n      return sortVisits;\n    }\n  }, {\n    key: \"sortViewsChart\",\n    value: function sortViewsChart(userLogs) {\n      var currentlyDate = startDate;\n      var start = currentlyDate.subtract(30, \"days\");\n      var sortViews = [];\n\n      for (var i = 30; i > 0; i--) {\n        var viewsOnDay = 0;\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === start.format('DD.MM')) {\n            viewsOnDay = viewsOnDay + userLogs[j].pages;\n          }\n        }\n\n        var oneDayValue = {\n          x: start.format('DD.MM'),\n          y: viewsOnDay\n        };\n        start = start.add(1, \"days\");\n        sortViews.push(oneDayValue);\n      }\n\n      return sortViews;\n    }\n  }, {\n    key: \"sortUsersChart\",\n    value: function sortUsersChart(userLogs) {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var sortUsers = [];\n\n      for (var i = 30; i > 0; i--) {\n        var uniqueUsers = [];\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM') && !uniqueUsers.includes(userLogs[j].userId)) {\n            uniqueUsers.push(userLogs[j].userId);\n          }\n        }\n\n        var oneDay = {\n          x: startDate.format('DD.MM'),\n          y: uniqueUsers.length\n        };\n        startDate = startDate.add(1, \"days\");\n        sortUsers.push(oneDay);\n      }\n\n      return sortUsers;\n    }\n  }, {\n    key: \"getDefaultChart\",\n    value: function getDefaultChart() {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var defaultDays = [];\n\n      for (var i = 30; i > 0; i--) {\n        var oneDay = {\n          x: startDate.format('DD.MM'),\n          y: 0\n        };\n        startDate = startDate.add(1, \"days\");\n        defaultDays.push(oneDay);\n      }\n\n      return defaultDays;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"maskComponent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, !this.state.loading ? React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebar\",\n        id: \"sidebar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        activeItem: 7717,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"panel\",\n        id: \"panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(MonthWorkspace, {\n        charts: this.state.charts,\n        defaultChart: this.state.defaultChart,\n        strainData: this.state.strainData,\n        setPeriod: this.setPeriod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Month;\n}(React.Component);\n\nexport default Month;","map":{"version":3,"sources":["/Users/maksimzajcev/Desktop/Work/src/components/React.month.js"],"names":["React","dataLoad","Navigation","Loader","moment","MonthWorkspace","urlLogs","Month","props","state","charts","defaultChart","strainData","settingPeriod","Date","format","loading","loadData","period","console","log","fetch","then","response","json","result","parseData","catch","e","usersLogs","startDate","usersChart","sortUsersChart","visitsChart","sortVisitsChart","viewsChart","sortViewsChart","getDefaultChart","users","chartId","data","display","color","visits","views","i","dayData","date","x","y","push","setState","userLogs","currentlyDate","start","subtract","sortVisits","visitsOnDay","j","length","slice","oneDayValue","add","sortViews","viewsOnDay","pages","sortUsers","uniqueUsers","includes","userId","oneDay","defaultDays","setPeriod","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport moment from 'moment'\nimport MonthWorkspace from './React.month.workspace';\nimport '../css/main.css';\n\nconst urlLogs = 'http://localhost:3000/logs';\n\nclass Month extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            charts: {},\n            defaultChart: [],\n            strainData: [],\n            settingPeriod: moment(new Date()).format('MM.YYYY'),\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        this.loadData(this.state.settingPeriod);\n    }\n\n    loadData(period) {\n        console.log(\"Загружаемый период:\");\n        console.log(period);\n        fetch(urlLogs + '?period=' + period)\n            .then(function(response) {\n                console.log(response);\n                return response.json();\n            })\n            .then(result => this.parseData(result, period))\n            .catch(e => console.log(e));\n    }\n\n    parseData(usersLogs, period) {\n        console.log('Результат загрузки:');\n        console.log(usersLogs);\n        \n        var startDate = moment('01.' + period, 'DD.MM.YYYY');\n        console.log('Начальная дата:');\n        console.log(startDate);\n\n        var usersChart = this.sortUsersChart(usersLogs, period);\n        var visitsChart = this.sortVisitsChart(usersLogs, period);\n        var viewsChart = this.sortViewsChart(usersLogs, period);\n        var defaultChart = this.getDefaultChart(period);\n\n        var charts = {\n            users: {\n                chartId: 4501,\n                data: usersChart,\n                display: true,\n                color: '#84c9f6'\n            },\n            visits: {\n                chartId: 4502,\n                data: visitsChart,\n                display: true,\n                color: '#3fa6e9'\n            },\n            views: {\n                chartId: 4503,\n                data: viewsChart,\n                display: true,\n                color: '#127bbf'\n            }\n        };\n\n        var strainData = [];\n\n        for (let i = 0; i < 30; i++) {\n            var dayData = {\n                date: charts.users.data[i].x,\n                users: charts.users.data[i].y,\n                visits: charts.visits.data[i].y,\n                views: charts.views.data[i].y,\n            }\n\n            strainData.push(dayData);\n        }\n\n        this.setState({\n            charts: charts,\n            defaultChart: defaultChart,\n            strainData: strainData,\n            loading: true\n        });   \n    }\n\n    sortVisitsChart(userLogs, startDate) {\n        var currentlyDate = startDate;\n        var start = currentlyDate.subtract(30, \"days\");\n        var sortVisits = [];\n\n        for (let i = 30; i > 0; i--) {\n            var visitsOnDay = 0;\n            for (let j = 0; j < userLogs.length; j++) {\n                if (userLogs[j].date.slice(0, 5) === start.format('DD.MM')) {\n                    visitsOnDay++;\n                }\n            }\n\n            var oneDayValue = {\n                x: start.format('DD.MM'),\n                y: visitsOnDay\n            };\n\n            start = start.add(1, \"days\");\n            sortVisits.push(oneDayValue);\n        }\n\n        return sortVisits;\n    }\n\n    sortViewsChart(userLogs) {\n        var currentlyDate = startDate;\n        var start = currentlyDate.subtract(30, \"days\");\n        var sortViews = [];\n\n        for (let i = 30; i > 0; i--) {\n            var viewsOnDay = 0;\n            for (let j = 0; j < userLogs.length; j++) {\n                if (userLogs[j].date.slice(0, 5) === start.format('DD.MM')) {\n                    viewsOnDay = viewsOnDay + userLogs[j].pages;\n                }\n            }\n\n            var oneDayValue = {\n                x: start.format('DD.MM'),\n                y: viewsOnDay\n            };\n\n            start = start.add(1, \"days\");\n            sortViews.push(oneDayValue);\n        }\n\n        return sortViews;\n    }\n\n    sortUsersChart(userLogs) {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var sortUsers = [];\n\n        for (let i = 30; i > 0; i--) {\n            var uniqueUsers = [];\n            \n            for (let j = 0; j < userLogs.length; j++) {\n                if ((userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) && (!uniqueUsers.includes(userLogs[j].userId))){\n                    uniqueUsers.push(userLogs[j].userId);\n                }\n            }\n\n            var oneDay = {\n                x: startDate.format('DD.MM'),\n                y: uniqueUsers.length\n            };\n\n            startDate = startDate.add(1, \"days\");\n            sortUsers.push(oneDay);\n        }\n\n        return sortUsers;\n    }\n\n    getDefaultChart() {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var defaultDays = [];\n\n        for (let i = 30; i > 0; i--) {\n\n            var oneDay = {\n                x: startDate.format('DD.MM'),\n                y: 0\n            };\n\n            startDate = startDate.add(1, \"days\");\n            defaultDays.push(oneDay);\n        }\n\n        return defaultDays;\n    }\n\n    render() {\n        return (\n            <div id=\"maskComponent\">\n                {!this.state.loading ? <Loader /> : null}\n                <div className=\"sidebar\" id=\"sidebar\">\n                    <Navigation activeItem={7717} />\n                </div>\n                <div className=\"panel\" id=\"panel\">\n                    <MonthWorkspace\n                        charts={this.state.charts}\n                        defaultChart={this.state.defaultChart}\n                        strainData={this.state.strainData}\n                        setPeriod={this.setPeriod}\n                    />\n                </div>                        \n            </div>\n        );\n    }\n}\n\nexport default Month;\n\n"]},"metadata":{},"sourceType":"module"}