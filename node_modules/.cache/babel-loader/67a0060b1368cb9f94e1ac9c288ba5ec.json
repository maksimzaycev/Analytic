{"ast":null,"code":"import _classCallCheck from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/maksimzajcev/Desktop/Work/src/components/React.visits.js\";\nimport React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport VisitsWorkspace from './React.visits.workspace';\nimport '../css/main.css';\n\nvar Visits =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Visits, _React$Component);\n\n  function Visits(props) {\n    var _this;\n\n    _classCallCheck(this, Visits);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Visits).call(this, props));\n    _this.state = {\n      activity: [],\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(Visits, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.loadData();\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData() {\n      var _this2 = this;\n\n      var urlLogs = 'http://localhost:3000/logs';\n      var usersLogs;\n      dataLoad(urlLogs).then(function (logs) {\n        usersLogs = JSON.parse(logs);\n\n        var usersVisitsData = _this2.sortUsersViews(usersLogs);\n\n        _this2.setState({\n          activity: usersVisitsData,\n          loading: true\n        });\n      }).catch(function (logs) {\n        console.log('error ' + logs);\n      });\n    }\n  }, {\n    key: \"sortUsersViews\",\n    value: function sortUsersViews(usersLogs) {\n      var usersActivity = [];\n\n      for (var i = 0; i < usersLogs.length; i++) {\n        var logAdded = false;\n        var userActivity = {\n          userId: usersLogs[i].userId,\n          userName: usersLogs[i].name,\n          userCompany: usersLogs[i].company,\n          userViews: usersLogs[i].logItems.length,\n          userVisits: 1\n        };\n\n        for (var j = 0; j < usersActivity.length; j++) {\n          if (userActivity.userId === usersActivity[j].userId) {\n            usersActivity[j].userViews += userActivity.userViews;\n            usersActivity[j].userVisits += 1;\n            logAdded = true;\n          }\n        }\n\n        if (!logAdded) {\n          usersActivity.push(userActivity);\n        }\n      }\n\n      return usersActivity;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"maskComponent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, !this.state.loading ? React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebar\",\n        id: \"sidebar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        activeItem: 7713,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"panel\",\n        id: \"panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(VisitsWorkspace, {\n        visitsItems: this.state.activity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Visits;\n}(React.Component);\n\nexport default Visits;","map":{"version":3,"sources":["/Users/maksimzajcev/Desktop/Work/src/components/React.visits.js"],"names":["React","dataLoad","Navigation","Loader","VisitsWorkspace","Visits","props","state","activity","loading","loadData","urlLogs","usersLogs","then","logs","JSON","parse","usersVisitsData","sortUsersViews","setState","catch","console","log","usersActivity","i","length","logAdded","userActivity","userId","userName","name","userCompany","company","userViews","logItems","userVisits","j","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport VisitsWorkspace from './React.visits.workspace';\nimport '../css/main.css';\n\nclass Visits extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activity: [],\n            loading: false\n        };\n    }\n\n    componentWillMount() {\n        this.loadData();\n    }\n\n    loadData() {\n        var urlLogs = 'http://localhost:3000/logs';\n\n        var usersLogs;\n        dataLoad(urlLogs).then(logs => {\n\n            usersLogs = JSON.parse(logs);\n            var usersVisitsData = this.sortUsersViews(usersLogs);\n            this.setState({\n                activity: usersVisitsData,\n                loading: true\n            });\n        }).catch(function(logs) {\n            console.log('error ' + logs);\n        })\n    }\n\n    sortUsersViews(usersLogs) {\n\n        var usersActivity= [];\n\n        for (let i = 0; i < usersLogs.length; i++) {\n            var logAdded = false;\n            var userActivity = {\n                userId: usersLogs[i].userId,\n                userName: usersLogs[i].name,\n                userCompany: usersLogs[i].company,\n                userViews: usersLogs[i].logItems.length,\n                userVisits: 1\n            };\n            \n            for (let j = 0; j < usersActivity.length; j++) {\n                if (userActivity.userId === usersActivity[j].userId) {\n                    usersActivity[j].userViews += userActivity.userViews;\n                    usersActivity[j].userVisits += 1;\n                    logAdded = true;\n                }\n            }\n            \n            if (!logAdded) {\n                usersActivity.push(userActivity);\n            }\n                \n        }\n\n        return usersActivity;\n    }\n\n    render() {\n        return (\n            <div id=\"maskComponent\">\n                {!this.state.loading ? <Loader /> : null}\n                <div className=\"sidebar\" id=\"sidebar\">\n                    <Navigation activeItem={7713} />\n                </div>\n                <div className=\"panel\" id=\"panel\">\n                    <VisitsWorkspace visitsItems={this.state.activity} />\n                </div>                        \n            </div>\n        );\n    }\n}\n\nexport default Visits;\n\n"]},"metadata":{},"sourceType":"module"}