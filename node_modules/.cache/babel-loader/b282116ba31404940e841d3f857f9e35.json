{"ast":null,"code":"import _classCallCheck from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/maksimzajcev/Desktop/Work/src/components/React.objects.workspace.js\";\nimport React from 'react';\nimport ObjectsTable from './React.objects.table';\nimport FindObjects from './React.objects.find';\nimport AddObjects from './React.objects.add';\nimport Userbar from './React.userbar';\nimport dataAdd from '../models/dataAdd';\nimport dataUpdate from '../models/dataUpdate';\nimport dataDelete from '../models/dataDelete';\nimport 'react-vis/dist/style.css';\nimport '../css/main.css';\nvar urlObjects = 'http://localhost:3000/objects';\n\nvar ObjectsWorkspace =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ObjectsWorkspace, _React$Component);\n\n  function ObjectsWorkspace(props) {\n    var _this;\n\n    _classCallCheck(this, ObjectsWorkspace);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ObjectsWorkspace).call(this, props));\n\n    _this.remove = function (deleteId) {\n      var allObjectsData = _this.state.rows;\n      var index;\n\n      for (var i = 0; i < allObjectsData.length; i++) {\n        if (allObjectsData[i].id === deleteId) {\n          index = i;\n        }\n      }\n\n      console.log(\"INDEX УДАЛЯЕМОГО ОБЪЕКТА:\");\n      console.log(index);\n      allObjectsData.splice(index, 1);\n      dataDelete(urlObjects, deleteId).then(function (objects) {\n        _this.setState({\n          rows: allObjectsData,\n          changedRows: allObjectsData\n        });\n      }).catch(function (objects) {\n        console.log('error ' + objects);\n      });\n    };\n\n    _this.update = function (id, title, person, active, rating, link) {\n      var allObjectsData = _this.state.rows;\n      var updateObjectData = {\n        id: id,\n        title: title,\n        person: person,\n        active: active,\n        rating: rating,\n        link: link\n      };\n\n      for (var i = 0; i < allObjectsData.length; i++) {\n        if (allObjectsData[i].id === id) {\n          allObjectsData[i] = updateObjectData;\n        }\n      }\n\n      dataUpdate(urlObjects, updateObjectData, id).then(function (objects) {\n        _this.setState({\n          rows: allObjectsData,\n          changedRows: allObjectsData\n        });\n      }).catch(function (objects) {\n        console.log('error ' + objects);\n      });\n    };\n\n    _this.addRow = function (id, title, person, active, rating, link) {\n      var allObjectsData = _this.state.rows;\n      var newObjectsData = {\n        id: id,\n        title: title,\n        person: person,\n        active: active,\n        rating: rating,\n        link: link\n      };\n      allObjectsData.push(newObjectsData);\n      dataAdd(urlObjects, newObjectsData).then(function (users) {\n        _this.setState({\n          rows: allObjectsData,\n          changedRows: allObjectsData\n        });\n      }).catch(function (users) {\n        console.log('error ' + users);\n      });\n    };\n\n    _this.findRows = function (foundRows) {\n      _this.setState({\n        changedRows: foundRows\n      });\n    };\n\n    _this.state = {\n      rows: [],\n      changedRows: []\n    };\n    return _this;\n  }\n\n  _createClass(ObjectsWorkspace, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        rows: this.props.objects,\n        changedRows: this.props.objects\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState({\n        rows: nextProps.objects,\n        changedRows: nextProps.objects\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"objects\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Userbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(FindObjects, {\n        presentRows: this.state.rows,\n        find: this.findRows,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"objects__addbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"objects__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\\u0430\\u043C\\u0438 \\u043C\\u043E\\u043D\\u0438\\u0442\\u043E\\u0440\\u0438\\u043D\\u0433\\u0430\"), React.createElement(AddObjects, {\n        add: this.addRow,\n        currentObjects: this.state.rows,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"objects__data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"objects__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u0430 \\u043F\\u043E\\u0441\\u0435\\u0449\\u0435\\u043D\\u0438\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"), React.createElement(ObjectsTable, {\n        rows: this.state.changedRows,\n        remove: this.remove,\n        update: this.update,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ObjectsWorkspace;\n}(React.Component);\n\nexport default ObjectsWorkspace;","map":{"version":3,"sources":["/Users/maksimzajcev/Desktop/Work/src/components/React.objects.workspace.js"],"names":["React","ObjectsTable","FindObjects","AddObjects","Userbar","dataAdd","dataUpdate","dataDelete","urlObjects","ObjectsWorkspace","props","remove","deleteId","allObjectsData","state","rows","index","i","length","id","console","log","splice","then","objects","setState","changedRows","catch","update","title","person","active","rating","link","updateObjectData","addRow","newObjectsData","push","users","findRows","foundRows","nextProps","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ObjectsTable from './React.objects.table';\nimport FindObjects from './React.objects.find';\nimport AddObjects from './React.objects.add';\nimport Userbar from './React.userbar';\nimport dataAdd from '../models/dataAdd';\nimport dataUpdate from '../models/dataUpdate';\nimport dataDelete from '../models/dataDelete';\nimport 'react-vis/dist/style.css';\nimport '../css/main.css';\n\nconst urlObjects = 'http://localhost:3000/objects';\n\nclass ObjectsWorkspace extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            rows: [],\n            changedRows: []\n        };\n    }\n\n    componentWillMount() {\n        this.setState({ \n            rows: this.props.objects,\n            changedRows: this.props.objects\n        });\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        this.setState({ \n            rows: nextProps.objects,\n            changedRows: nextProps.objects\n        });\n    }\n\n    remove = (deleteId) => {\n        var allObjectsData = this.state.rows;\n        let index;\n\n        for (let i = 0; i < allObjectsData.length; i++) {\n            if (allObjectsData[i].id === deleteId) {\n                index = i;\n            }\n        }\n\n        console.log(\"INDEX УДАЛЯЕМОГО ОБЪЕКТА:\");\n        console.log(index);\n        \n        allObjectsData.splice(index, 1);\n\n        dataDelete(urlObjects, deleteId).then(objects => {\n            this.setState({\n                rows: allObjectsData,\n                changedRows: allObjectsData\n            });\n        }).catch(function(objects) {\n            console.log('error ' + objects);\n        })\n    };\n\n    update = (id, title, person, active, rating, link) => {\n        var allObjectsData = this.state.rows;\n        var updateObjectData = {\n            id: id,\n            title: title,\n            person: person,\n            active: active,\n            rating: rating,\n            link: link\n        };\n\n        for (let i = 0; i < allObjectsData.length; i++) {\n            if (allObjectsData[i].id === id) {\n                allObjectsData[i] = updateObjectData;\n            }\n        }\n\n        dataUpdate(urlObjects, updateObjectData, id).then(objects => {\n            this.setState({\n                rows: allObjectsData,\n                changedRows: allObjectsData\n            });\n        }).catch(function(objects) {\n            console.log('error ' + objects);\n        })\n\n    };\n\n    addRow = (id, title, person, active, rating, link) => {\n        var allObjectsData = this.state.rows;\n        var newObjectsData = {\n            id: id,\n            title: title,\n            person: person,\n            active: active,\n            rating: rating,\n            link: link\n        };\n\n        allObjectsData.push(newObjectsData);\n\n        dataAdd(urlObjects, newObjectsData).then(users => {\n            this.setState({\n                rows: allObjectsData,\n                changedRows: allObjectsData\n            });\n        }).catch(function(users) {\n            console.log('error ' + users);\n        })\n    };\n\n    findRows = (foundRows) => {\n        this.setState({\n            changedRows: foundRows\n        });\n    };\n\n    render() {\n\n        return (\n            <div className=\"objects\">\n                <Userbar>\n                    <FindObjects presentRows={this.state.rows} find={this.findRows} />\n                </Userbar>\n                <div className=\"objects__addbar\">\n                    <h2 className=\"objects__title\">Панель управления объектами мониторинга</h2>\n                    <AddObjects add={this.addRow} currentObjects={this.state.rows}/>\n                </div>\n                <div className=\"objects__data\">\n                    <h2 className=\"objects__title\">Таблица посещений пользователей</h2>\n                    <ObjectsTable\n                        rows={this.state.changedRows}\n                        remove={this.remove}\n                        update={this.update}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ObjectsWorkspace;\n"]},"metadata":{},"sourceType":"module"}