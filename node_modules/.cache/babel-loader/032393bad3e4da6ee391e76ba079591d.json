{"ast":null,"code":"import _classCallCheck from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maksimzajcev/Desktop/Work/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/maksimzajcev/Desktop/Work/src/components/React.month.js\";\nimport React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport moment from 'moment';\nimport MonthWorkspace from './React.month.workspace';\nimport '../css/main.css';\n\nvar Month =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Month, _React$Component);\n\n  function Month(props) {\n    var _this;\n\n    _classCallCheck(this, Month);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Month).call(this, props));\n    _this.state = {\n      charts: {},\n      defaultChart: [],\n      strainData: [],\n      settingPeriod: moment(new Date()).format('MM.YYYY'),\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(Month, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadData();\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData() {\n      var _this2 = this;\n\n      var urlLogs = 'http://localhost:3000/logs';\n      var usersLogs;\n      dataLoad(urlLogs).then(function (logs) {\n        usersLogs = JSON.parse(logs);\n\n        var usersChart = _this2.sortUsersChart(usersLogs);\n\n        var visitsChart = _this2.sortVisitsChart(usersLogs);\n\n        var viewsChart = _this2.sortViewsChart(usersLogs);\n\n        var defaultChart = _this2.getDefaultChart();\n\n        var charts = {\n          users: {\n            chartId: 4501,\n            data: usersChart,\n            display: true,\n            color: '#84c9f6'\n          },\n          visits: {\n            chartId: 4502,\n            data: visitsChart,\n            display: true,\n            color: '#3fa6e9'\n          },\n          views: {\n            chartId: 4503,\n            data: viewsChart,\n            display: true,\n            color: '#127bbf'\n          }\n        };\n        var finishDate = moment(new Date(), 'DD.MM').subtract(1, \"days\");\n        var startDate = moment(new Date(), 'DD.MM').subtract(30, \"days\");\n        var strainData = [];\n\n        for (var i = 0; i < 30; i++) {\n          var dayData = {\n            date: charts.users.data[i].x,\n            users: charts.users.data[i].y,\n            visits: charts.visits.data[i].y,\n            views: charts.views.data[i].y\n          };\n          strainData.push(dayData);\n        }\n\n        _this2.setState({\n          charts: charts,\n          defaultChart: defaultChart,\n          strainData: strainData,\n          startDate: startDate.format('DD.MM'),\n          finishDate: finishDate.format('DD.MM'),\n          loading: true\n        });\n      }).catch(function (logs) {\n        console.log('error ' + logs);\n      });\n    }\n  }, {\n    key: \"sortVisitsChart\",\n    value: function sortVisitsChart(userLogs) {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var sortVisits = [];\n\n      for (var i = 30; i > 0; i--) {\n        var visitsOnDay = 0;\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) {\n            visitsOnDay++;\n          }\n        }\n\n        var oneDayValue = {\n          x: startDate.format('DD.MM'),\n          y: visitsOnDay\n        };\n        startDate = startDate.add(1, \"days\");\n        sortVisits.push(oneDayValue);\n      }\n\n      return sortVisits;\n    }\n  }, {\n    key: \"sortViewsChart\",\n    value: function sortViewsChart(userLogs) {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var sortViews = [];\n\n      for (var i = 30; i > 0; i--) {\n        var viewsOnDay = 0;\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) {\n            viewsOnDay = viewsOnDay + userLogs[j].pages;\n          }\n        }\n\n        var oneDayValue = {\n          x: startDate.format('DD.MM'),\n          y: viewsOnDay\n        };\n        startDate = startDate.add(1, \"days\");\n        sortViews.push(oneDayValue);\n      }\n\n      return sortViews;\n    }\n  }, {\n    key: \"sortUsersChart\",\n    value: function sortUsersChart(userLogs) {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var sortUsers = [];\n\n      for (var i = 30; i > 0; i--) {\n        var uniqueUsers = [];\n\n        for (var j = 0; j < userLogs.length; j++) {\n          if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM') && !uniqueUsers.includes(userLogs[j].userId)) {\n            uniqueUsers.push(userLogs[j].userId);\n          }\n        }\n\n        var oneDay = {\n          x: startDate.format('DD.MM'),\n          y: uniqueUsers.length\n        };\n        startDate = startDate.add(1, \"days\");\n        sortUsers.push(oneDay);\n      }\n\n      return sortUsers;\n    }\n  }, {\n    key: \"getDefaultChart\",\n    value: function getDefaultChart() {\n      var currentlyDate = moment(new Date(), 'DD.MM');\n      var startDate = currentlyDate.subtract(30, \"days\");\n      var defaultDays = [];\n\n      for (var i = 30; i > 0; i--) {\n        var oneDay = {\n          x: startDate.format('DD.MM'),\n          y: 0\n        };\n        startDate = startDate.add(1, \"days\");\n        defaultDays.push(oneDay);\n      }\n\n      return defaultDays;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"maskComponent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, !this.state.loading ? React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebar\",\n        id: \"sidebar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        activeItem: 7717,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"panel\",\n        id: \"panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(MonthWorkspace, {\n        charts: this.state.charts,\n        defaultChart: this.state.defaultChart,\n        strainData: this.state.strainData,\n        setPeriod: this.setPeriod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Month;\n}(React.Component);\n\nexport default Month;","map":{"version":3,"sources":["/Users/maksimzajcev/Desktop/Work/src/components/React.month.js"],"names":["React","dataLoad","Navigation","Loader","moment","MonthWorkspace","Month","props","state","charts","defaultChart","strainData","settingPeriod","Date","format","loading","loadData","urlLogs","usersLogs","then","logs","JSON","parse","usersChart","sortUsersChart","visitsChart","sortVisitsChart","viewsChart","sortViewsChart","getDefaultChart","users","chartId","data","display","color","visits","views","finishDate","subtract","startDate","i","dayData","date","x","y","push","setState","catch","console","log","userLogs","currentlyDate","sortVisits","visitsOnDay","j","length","slice","oneDayValue","add","sortViews","viewsOnDay","pages","sortUsers","uniqueUsers","includes","userId","oneDay","defaultDays","setPeriod","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dataLoad from '../models/dataLoad';\nimport Navigation from './React.nav';\nimport Loader from './React.loader';\nimport moment from 'moment'\nimport MonthWorkspace from './React.month.workspace';\nimport '../css/main.css';\n\nclass Month extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            charts: {},\n            defaultChart: [],\n            strainData: [],\n            settingPeriod: moment(new Date()).format('MM.YYYY'),\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    loadData() {\n        var urlLogs = 'http://localhost:3000/logs';\n\n        var usersLogs;\n\n        dataLoad(urlLogs).then(logs => {\n            usersLogs = JSON.parse(logs);\n            \n            var usersChart = this.sortUsersChart(usersLogs);\n            var visitsChart = this.sortVisitsChart(usersLogs);\n            var viewsChart = this.sortViewsChart(usersLogs);\n            var defaultChart = this.getDefaultChart();\n\n            var charts = {\n                users: {\n                    chartId: 4501,\n                    data: usersChart,\n                    display: true,\n                    color: '#84c9f6'\n                },\n                visits: {\n                    chartId: 4502,\n                    data: visitsChart,\n                    display: true,\n                    color: '#3fa6e9'\n                },\n                views: {\n                    chartId: 4503,\n                    data: viewsChart,\n                    display: true,\n                    color: '#127bbf'\n                }\n            };\n\n            var finishDate = moment(new Date(), 'DD.MM').subtract(1, \"days\");\n            var startDate = moment(new Date(), 'DD.MM').subtract(30, \"days\");\n\n            var strainData = [];\n\n            for (let i = 0; i < 30; i++) {\n                var dayData = {\n                    date: charts.users.data[i].x,\n                    users: charts.users.data[i].y,\n                    visits: charts.visits.data[i].y,\n                    views: charts.views.data[i].y,\n                }\n\n                strainData.push(dayData);\n            }\n\n            this.setState({\n                charts: charts,\n                defaultChart: defaultChart,\n                strainData: strainData,\n                startDate: startDate.format('DD.MM'),\n                finishDate: finishDate.format('DD.MM'),\n                loading: true\n            });\n\n        }).catch(function(logs) {\n            console.log('error ' + logs);\n        })\n    }\n\n    sortVisitsChart(userLogs) {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var sortVisits = [];\n\n        for (let i = 30; i > 0; i--) {\n            var visitsOnDay = 0;\n            for (let j = 0; j < userLogs.length; j++) {\n                if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) {\n                    visitsOnDay++;\n                }\n            }\n\n            var oneDayValue = {\n                x: startDate.format('DD.MM'),\n                y: visitsOnDay\n            };\n\n            startDate = startDate.add(1, \"days\");\n            sortVisits.push(oneDayValue);\n        }\n\n        return sortVisits;\n    }\n\n    sortViewsChart(userLogs) {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var sortViews = [];\n\n        for (let i = 30; i > 0; i--) {\n            var viewsOnDay = 0;\n            for (let j = 0; j < userLogs.length; j++) {\n                if (userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) {\n                    viewsOnDay = viewsOnDay + userLogs[j].pages;\n                }\n            }\n\n            var oneDayValue = {\n                x: startDate.format('DD.MM'),\n                y: viewsOnDay\n            };\n\n            startDate = startDate.add(1, \"days\");\n            sortViews.push(oneDayValue);\n        }\n\n        return sortViews;\n    }\n\n    sortUsersChart(userLogs) {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var sortUsers = [];\n\n        for (let i = 30; i > 0; i--) {\n            var uniqueUsers = [];\n            \n            for (let j = 0; j < userLogs.length; j++) {\n                if ((userLogs[j].date.slice(0, 5) === startDate.format('DD.MM')) && (!uniqueUsers.includes(userLogs[j].userId))){\n                    uniqueUsers.push(userLogs[j].userId);\n                }\n            }\n\n            var oneDay = {\n                x: startDate.format('DD.MM'),\n                y: uniqueUsers.length\n            };\n\n            startDate = startDate.add(1, \"days\");\n            sortUsers.push(oneDay);\n        }\n\n        return sortUsers;\n    }\n\n    getDefaultChart() {\n        var currentlyDate = moment(new Date(), 'DD.MM');\n        var startDate = currentlyDate.subtract(30, \"days\");\n        var defaultDays = [];\n\n        for (let i = 30; i > 0; i--) {\n\n            var oneDay = {\n                x: startDate.format('DD.MM'),\n                y: 0\n            };\n\n            startDate = startDate.add(1, \"days\");\n            defaultDays.push(oneDay);\n        }\n\n        return defaultDays;\n    }\n\n    render() {\n        return (\n            <div id=\"maskComponent\">\n                {!this.state.loading ? <Loader /> : null}\n                <div className=\"sidebar\" id=\"sidebar\">\n                    <Navigation activeItem={7717} />\n                </div>\n                <div className=\"panel\" id=\"panel\">\n                    <MonthWorkspace\n                        charts={this.state.charts}\n                        defaultChart={this.state.defaultChart}\n                        strainData={this.state.strainData}\n                        setPeriod={this.setPeriod}\n                    />\n                </div>                        \n            </div>\n        );\n    }\n}\n\nexport default Month;\n\n"]},"metadata":{},"sourceType":"module"}